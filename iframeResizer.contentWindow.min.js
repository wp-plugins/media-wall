/*! iFrame Resizer (iframeSizer.contentWindow.min.js) - v2.4.8 - 2014-05-20
 *  Desc: Include this file in any page being loaded into an iframe
 *        to force the iframe to resize to the content size.
 *  Requires: iframeResizer.min.js on host page.
 *  Copyright: (c) 2014 David J. Bradshaw - dave@bradshaw.net
 *  License: MIT
 */
!function(){"use strict";function t(t,e,n){"addEventListener"in window?t.addEventListener(e,n,!1):"attachEvent"in window&&t.attachEvent("on"+e,n)}function e(t){return Y+"["+_+"] "+t}function n(t){X&&"object"==typeof window.console&&console.log(e(t))}function i(t){"object"==typeof window.console&&console.warn(e(t))}function o(){n("Initialising iFrame"),r(),a(),c("background",A),c("padding",R),g(),f(),l(),v(),m()}function r(){function t(t){return"true"===t?!0:!1}var e=J.substr(Z).split(":");_=e[0],P=void 0!==e[1]?parseInt(e[1],W):P,j=void 0!==e[2]?t(e[2]):j,X=void 0!==e[3]?t(e[3]):X,Q=void 0!==e[4]?parseInt(e[4],W):Q,te=void 0!==e[5]?t(e[5]):te,V=void 0!==e[6]?t(e[6]):V,N=e[7],$=void 0!==e[8]?e[8]:$,A=e[9],R=e[10]}function u(t,e){return-1!==e.indexOf("-")&&(i("Negative CSS value ignored for "+t),e=""),e}function c(t,e){void 0!==e&&""!==e&&"null"!==e&&(document.body.style[t]=e,n("Body "+t+' set to "'+e+'"'))}function a(){void 0===N&&(N=P+"px"),u("margin",N),c("margin",N)}function l(){document.documentElement.style.height="",document.body.style.height="",n('HTML & body height set to "auto"')}function s(){t(window,"resize",function(){T("resize","Window resized")})}function d(){t(window,"click",function(){T("click","Window clicked")})}function f(){U!==$&&($ in ce||(i($+" is not a valid option for heightCalculationMethod."),$="bodyScroll"),n('Height calculation method set to "'+$+'"'))}function m(){!0===V?(s(),d(),b()):n("Auto Resize disabled")}function g(){var t=document.createElement("div");t.style.clear="both",t.style.display="block",document.body.appendChild(t)}function v(){te&&(n("Enable public methods"),window.parentIFrame={close:function(){T("close","parentIFrame.close()",0,0)},getId:function(){return _},reset:function(){F("parentIFrame.size")},sendMessage:function(t,e){H(0,0,"message",t,e)},setHeightCalculationMethod:function(t){$=t,f()},setTargetOrigin:function(t){n("Set targetOrigin: "+t),ne=t},size:function(t,e){var n=""+(t?t:"")+(e?","+e:"");x(),T("size","parentIFrame.size("+n+")",t,e)}})}function h(){0!==Q&&(n("setInterval: "+Q+"ms"),setInterval(function(){T("interval","setInterval: "+Q)},Math.abs(Q)))}function y(e){function i(e){(void 0===e.height||void 0===e.width||0===e.height||0===e.width)&&(n("Attach listerner to "+e.src),t(e,"load",function(){T("imageLoad","Image loaded")}))}e.forEach(function(t){if("attributes"===t.type&&"src"===t.attributeName)i(t.target);else if("childList"===t.type){var e=t.target.querySelectorAll("img");Array.prototype.forEach.call(e,function(t){i(t)})}})}function b(){function t(){var t=document.querySelector("body"),i={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},o=new e(function(t){T("mutationObserver","mutationObserver: "+t[0].target+" "+t[0].type),y(t)});n("Enable MutationObserver"),o.observe(t,i)}var e=window.MutationObserver||window.WebKitMutationObserver;e?0>Q?h():t():(i("MutationObserver not supported in this browser!"),h())}function p(){function t(t){function e(t){var e=/^\d+(px)?$/i;if(e.test(t))return parseInt(t,W);var i=n.style.left,o=n.runtimeStyle.left;return n.runtimeStyle.left=n.currentStyle.left,n.style.left=t||0,t=n.style.pixelLeft,n.style.left=i,n.runtimeStyle.left=o,t}var n=document.body,i=0;return"defaultView"in document&&"getComputedStyle"in document.defaultView?(i=document.defaultView.getComputedStyle(n,null),i=null!==i?i[t]:0):i=e(n.currentStyle[t]),parseInt(i,W)}return document.body.offsetHeight+t("marginTop")+t("marginBottom")}function w(){return document.body.scrollHeight}function S(){return document.documentElement.offsetHeight}function E(){return document.documentElement.scrollHeight}function I(){return[p(),w(),S(),E()]}function z(){return Math.max.apply(null,I())}function M(){return Math.min.apply(null,I())}function O(){return Math.max(document.documentElement.scrollWidth,document.body.scrollWidth)}function T(t,e,i,o){function r(){t in{reset:1,resetPage:1,init:1}||n("Trigger event: "+e)}function u(){D=m,ue=g,H(D,ue,t)}function c(){return oe&&t in q}function a(){return D!==m||j&&ue!==g}function l(){return!(t in{init:1,interval:1,size:1})}function s(){return $ in ee}function d(){n("No change in size detected")}function f(){l()&&s()?F(e):t in{interval:1}||(r(),d())}var m=void 0!==i?i:ce[$](),g=void 0!==o?o:O();c()?n("Trigger event cancelled: "+t):a()?(r(),x(),u()):f()}function x(){oe||(oe=!0,n("Trigger event lock on")),clearTimeout(re),re=setTimeout(function(){oe=!1,n("Trigger event lock off"),n("--")},B)}function k(t){D=ce[$](),ue=O(),H(D,ue,t)}function F(t){var e=$;$=U,n("Reset trigger event: "+t),x(),k("reset"),$=e}function H(t,e,i,o,r){function u(){void 0===r?r=ne:n("Message targetOrigin: "+r)}function c(){var u=t+":"+e,c=_+":"+u+":"+i+(void 0!==o?":"+o:"");n("Sending message to host page ("+c+")"),ie.postMessage(Y+c,r)}u(),c()}function L(){return"iFrameResize"in window}function C(t){function e(){return Y===(""+t.data).substr(0,Z)}e()&&(K?(J=t.data,o(),T("init","Init message from host page"),K=!1,setTimeout(function(){G=!1},B)):"reset"===t.data.split("]")[1]?G?n("Page reset ignored by init"):(n("Page size reset by host page"),k("resetPage")):t.data===J||L()||i("Unexpected message ("+t.data+")"))}var V=!0,W=10,A="",P=0,N="",R="",j=!1,q={resize:1,click:1},B=64,D=1,K=!0,U="offset",$=U,G=!0,J="",Q=32,X=!1,Y="[iFrameSizer]",Z=Y.length,_="",te=!1,ee={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},ne="*",ie=window.parent,oe=!1,re=null,ue=1,ce={offset:p,bodyOffset:p,bodyScroll:w,documentElementOffset:S,scroll:E,documentElementScroll:E,max:z,min:M,grow:z};t(window,"message",C)}();