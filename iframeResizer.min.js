/*! iFrame Resizer (iframeSizer.min.js ) - v2.4.8 - 2014-05-20
 *  Desc: Force cross domain iframes to size to content.
 *  Requires: iframeResizer.contentWindow.min.js to be loaded into the target frame.
 *  Copyright: (c) 2014 David J. Bradshaw - dave@bradshaw.net
 *  License: MIT
 */

!function(){"use strict";function e(e,n,i){"addEventListener"in window?e.addEventListener(n,i,!1):"attachEvent"in window&&e.attachEvent("on"+n,i)}function n(){var e,n=["moz","webkit","o","ms"];for(e=0;e<n.length&&!M;e+=1)M=window[n[e]+"RequestAnimationFrame"];M||i(" RequestAnimationFrame not supported")}function i(e){z.log&&"object"==typeof console&&console.log(b+"[Host page"+p+"]"+e)}function t(e){function n(){function e(){s(M),r()}c(e,M,"resetPage")}function t(e){i(" Removing iFrame: "+e.id),e.parentNode.removeChild(e),i(" --")}function o(){var e=v.substr(w).split(":");return{iframe:document.getElementById(e[0]),id:e[0],height:e[1],width:e[2],type:e[3]}}function l(){var n=e.origin,t=M.iframe.src.split("/").slice(0,3).join("/");if(z.checkOrigin&&(i(" Checking conection is from: "+t),""+n!="null"&&n!==t))throw new Error("Unexpected message received from: "+n+" for "+M.iframe.id+". Message was: "+e.data+". This error can be disabled by adding the checkOrigin: false option.");return!0}function d(){return b===(""+v).substr(0,w)}function f(){var e=M.type in{"true":1,"false":1};return e&&i(" Ignoring init message from meta parent page"),e}function u(){var e=v.substr(v.indexOf(":")+y+6);i(" MessageCallback passed: {iframe: "+M.iframe.id+", message: "+e+"}"),z.messageCallback({iframe:M.iframe,message:e}),i(" --")}function g(){if(null===M.iframe)throw new Error("iFrame ("+M.id+") does not exist on "+p);return!0}function h(){switch(M.type){case"close":t(M.iframe),z.resizedCallback(M);break;case"message":u();break;case"reset":a(M);break;default:n(),z.resizedCallback(M)}}var v=e.data,M={};d()&&(i(" Received: "+v),M=o(),!f()&&g()&&l()&&(m=!1,h()))}function o(){null===v&&(v={x:void 0!==window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop},i(" Get position: "+v.x+","+v.y))}function r(){null!==v&&(window.scrollTo(v.x,v.y),i(" Set position: "+v.x+","+v.y),v=null)}function a(e){function n(){s(e),l("reset","reset",e.iframe)}i(" Size reset requested by "+("init"===e.type?"host page":"iFrame")),o(),c(n,e,"init")}function s(e){function n(n){e.iframe.style[n]=e[n]+"px",i(" IFrame ("+e.iframe.id+") "+n+" set to "+e[n]+"px")}z.sizeHeight&&n("height"),z.sizeWidth&&n("width")}function c(e,n,t){t!==n.type&&M?(i(" Requesting animation frame"),M(e)):e()}function l(e,n,t){i("["+e+"] Sending msg to iframe ("+n+")"),t.contentWindow.postMessage(b+n,"*")}function d(){function n(e){return""===e&&(c.id=e="iFrameResizer"+g++,i(" Added missing iframe ID: "+e)),e}function t(){i(" IFrame scrolling "+(z.scrolling?"enabled":"disabled")+" for "+d),c.style.overflow=!1===z.scrolling?"hidden":"auto",c.scrolling=!1===z.scrolling?"no":"yes"}function o(){("number"==typeof z.bodyMargin||"0"===z.bodyMargin)&&(z.bodyMarginV1=z.bodyMargin,z.bodyMargin=""+z.bodyMargin+"px")}function r(){return d+":"+z.bodyMarginV1+":"+z.sizeWidth+":"+z.log+":"+z.interval+":"+z.enablePublicMethods+":"+z.autoResize+":"+z.bodyMargin+":"+z.heightCalculationMethod+":"+z.bodyBackground+":"+z.bodyPadding}function s(n){e(c,"load",function(){l("iFrame.onload",n,c),!m&&z.heightCalculationMethod in k&&a({iframe:c,height:0,width:0,type:"init"})}),l("init",n,c)}var c=this,d=n(c.id);t(),o(),s(r())}function f(){function e(e){if("IFRAME"!==e.tagName)throw new TypeError("Expected <IFRAME> tag, found <"+e.tagName+">.");d.call(e)}function n(e){if(e=e||{},"object"!=typeof e)throw new TypeError("Options is not an object.");for(var n in E)E.hasOwnProperty(n)&&(z[n]=e.hasOwnProperty(n)?e[n]:E[n])}window.iFrameResize=function(i,t){n(i),Array.prototype.forEach.call(document.querySelectorAll(t||"iframe"),e)}}function u(e){e.fn.iFrameResize=function(n){return z=e.extend({},E,n),this.filter("iframe").each(d).end()}}var g=0,m=!0,h="message",y=h.length,b="[iFrameSizer]",w=b.length,p="",v=null,M=window.requestAnimationFrame,k={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},z={},E={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,enablePublicMethods:!1,heightCalculationMethod:"offset",interval:32,log:!1,messageCallback:function(){},resizedCallback:function(){},scrolling:!1,sizeHeight:!0,sizeWidth:!1};n(),e(window,"message",t),f(),"jQuery"in window&&u(jQuery)}();